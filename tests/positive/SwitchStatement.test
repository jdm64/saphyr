
void switchWithDefault(int x)
{
	switch (x) {
	case 4:
		x = 3;
	case 6:
		x = 1;
		break;
	default:
		x = 7;
		break;
	}
}

double switchNoDefault(float x)
{
	switch (x) {
	case 1:
		x = 4;
	case 3:
		x = 6;
		break;
	}
	return x;	
}

int main()
{
	switchWithDefault(7);
	auto x = switchNoDefault(false);

	return x;
}

========

define void @switchWithDefault(i32 %x) {
  %1 = alloca i32
  store i32 %x, i32* %1
  %2 = load i32, i32* %1
  switch i32 %2, label %5 [
    i32 4, label %3
    i32 6, label %4
  ]

; <label>:3:                                      ; preds = %0
  store i32 3, i32* %1
  br label %4

; <label>:4:                                      ; preds = %0, %3
  store i32 1, i32* %1
  br label %6

; <label>:5:                                      ; preds = %0
  store i32 7, i32* %1
  br label %6

; <label>:6:                                      ; preds = %5, %4
  ret void
}

define double @switchNoDefault(float %x) {
  %1 = alloca float
  store float %x, float* %1
  %2 = load float, float* %1
  %3 = fptosi float %2 to i32
  switch i32 %3, label %6 [
    i32 1, label %4
    i32 3, label %5
  ]

; <label>:4:                                      ; preds = %0
  store float 4.000000e+00, float* %1
  br label %5

; <label>:5:                                      ; preds = %0, %4
  store float 6.000000e+00, float* %1
  br label %6

; <label>:6:                                      ; preds = %0, %5
  %7 = load float, float* %1
  %8 = fpext float %7 to double
  ret double %8
}

define i32 @main() {
  call void @switchWithDefault(i32 7)
  %1 = call double @switchNoDefault(float 0.000000e+00)
  %x = alloca double
  store double %1, double* %x
  %2 = load double, double* %x
  %3 = fptosi double %2 to i32
  ret i32 %3
}

========

main T
switchNoDefault T
switchWithDefault T
